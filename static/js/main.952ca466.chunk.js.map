{"version":3,"sources":["compendium.ts","ktlib.ts","roster.tsx","App.js","reportWebVitals.js","index.js"],"names":["next_id","_","undefined","init_faction","name","kw_name","clan_label","kws","faction","units","_kws","length","split","unit","move","apl","ga","df","sv","hp","prev","keywords","join","replace","toLowerCase","concat","substr","extra","weapons","filter","x","map","w","uname","type","atk","ws","dam","cdam","sr","cr","secondary","actions","a","cost","descr","abilities","on_weapon","endsWith","id","push","unit2","fname","f","forEach","icon_bearer","factions","tau","markerlight","camo_field","drone","space_marine","ork","kombi","orks","death_guard","kw_base","kw_marine","resilient","ecclesiarchy","kw_bsister","combi","Compendium","random_faction","Object","keys","sort","Math","random","storage_get","key","json","localStorage","getItem","JSON","parse","e","storage_get_dflt","dflt","val","storage_set","obj","setItem","stringify","scrub_roster","roster","cunit","find","u","Root","useState","mode","setMode","init","onChange","setVal","nval","useState2","setRoster","onCancel","roster_view","RosterView","onNew","onLoad","create_view","render_if","CreateRoster","onCreate","loader_view","LoadRoster","props","setName","setFaction","clan","setClan","Modal","className","value","target","entries","style","textTransform","onClick","trim","created","Date","updated","disabled","edit","setEdit","add","setAdd","ktlib","fn","editor","onSave","nconf","idx","findIndex","doDelete","splice","UnitEditor","conf","saves","save","s","max","n","DataCard","onEdit","DamageTracker","kw","primary","ranged","melee","has_sr","rule","wx","indexOf","count","scrub_text","txt","matchAll","i","clazz","each","range_array","ceil","floor","el1","el2","is_edit","countRef","useRef","rangedRef","meleeRef","unitid","setUnitId","setUnit","setId","r_weapons","get_unique_weapons","m_weapons","Select","values","current","children","state","setState","set","Array","from","names","Set","cond","el","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","window","location","search","clear","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.952ca466.chunk.js","sourcesContent":["import { Weapon, Faction, Dict } from './types'\n\n\ntype I_Weapon = [0|1,string,number,number,number,number,string?,string?,I_Ability?]\ntype I_Ability = [2,string,string?]\ntype I_Action = [3,string,number,string]\ntype I_Extra = I_Weapon | I_Ability | I_Action\ntype I_Unit = [string,number,number,number,number,number,number,string,...I_Extra[]]\n\n\nlet next_id = 1;\nconst _ = undefined;\n\n\nfunction init_faction(name:string, kw_name:string, clan_label:string, kws:string) {\n  let faction:Faction = {name, clan_label, units:[]};\n  var _kws = (kws.length > 0) ? kws.split(/, /g) : [];\n\n  const unit = (name:string, move:number, apl:number, ga:number, df:number, sv:number,\n    hp:number, kws:string, ...extra:I_Extra[]\n  ) => {\n\n    if (kws === '+') {\n      const prev = faction.units[faction.units.length-1]\n      kws = '=' + prev.keywords.join(', ').replace(prev.name.toLowerCase(), name.toLowerCase());\n    }\n\n    var keywords = _kws.concat(kws.split(/, /g));\n    if (kws[0] === '=') {\n      keywords = kws.substr(1).split(/, /g)\n    }\n\n    var weapons = (extra.filter(x => x[0] === 0 || x[0] === 1) as I_Weapon[]).map(w => {\n      var uname = w[1].replace(/ \\|.*$/,'')\n      return {\n        name:w[1], uname, type: (!w[0] ? 'r' : 'm'), atk:w[2], ws:w[3], dam:w[4], cdam:w[5],\n        sr: w[6] || null, cr: w[7] || null, secondary:w[8] ? (w[8][1]) : null\n      } as Weapon\n    });\n\n    var actions = (extra.filter(x => x[0] === 3) as I_Action[])\n      .map(a => ({ name: a[1], cost: a[2], descr: a[3] }));\n\n    var abilities = (extra.filter(x => x[0] === 2) as I_Ability[])\n      .map(a => ({name: a[1], descr: a[2] || \"\", on_weapon:a[1].endsWith('*')}));\n\n    var id = next_id++;\n    let unit = {id,name,faction:kw_name,keywords,move,apl,ga,df,sv,hp,weapons,actions,abilities}\n    faction.units.push(unit)\n    return unit;\n  }\n\n  const unit2 = (name:string, kws:string, ...extra:I_Extra[]) => {\n    const prev = faction.units[faction.units.length-1]\n    const {move,apl,ga,df,sv,hp} = prev;\n\n    return unit(name, move, apl, ga, df, sv, hp, kws, ...extra)\n  }\n\n  return {faction,unit,unit2}\n}\n\n\nfunction faction(fname:string, faction:string, clan_label:string, kws:string, units:I_Unit[]) {\n  const f = init_faction(fname, faction, clan_label, kws);\n  units.forEach(([name,move,apl,ga,df,sv,hp,kws,...extra]) => {\n    f.unit(name,move,apl,ga,df,sv,hp,kws,...extra);\n  });\n  return f.faction;\n}\n\n\nconst icon_bearer:I_Ability = [2, 'Icon Bearer', \"When determining control of an objective marker, treat this operative's APL as being 1 higher. Note that this is not a modifier. In narrative play, this is cumulative with the Focused Battle Honour (see the Kill Team Core Book).\"];\n\n\n\nfunction tau() {\n  var markerlight:I_Action = [3, 'Markerlight', 1, 'See page 137'];\n  var camo_field:I_Ability = [2, 'Camouflage Field', 'Each time an enemy operative makes a shooting attack, unless it is within @0 of this operative or it is a subsequent attack made as a result of the Blast special rule, this operative is always treated as being in Cover for that shooting attack. While this operative has a Conceal order, it is always treated as having a Conceal order, regardless of any other rules (e.g. Vantage Point).']\n\n  const f = init_faction(\"T'au Empire\", 'hunter cadre', 'sept', \"t,au, <>\")\n\n  f.unit(\"Fire warrior shas'la\", 3, 2, 1, 3, 4, 7, \"fire warrior, shas'la\",\n    [0, \"Pulse blaster | Close range\", 4, 4, 4, 5, 'Rng @6, AP1'],\n    [0, \"Pulse blaster | Long range\", 4, 4, 3, 4],\n    [0, \"Pulse carbine\", 4, 4, 4, 5],\n    [0, \"Pulse rifle\", 4, 4, 4, 5],\n    [1, \"Gun butt\", 3, 5, 2, 3],\n    markerlight, camo_field)\n\n  f.unit(\"Fire warrior shas'ui\", 3, 2, 1, 3, 4, 8, \"leader, fire warrior, shas'ui\",\n    [0, \"Pulse blaster | Close range\", 4, 3, 4, 5, 'Rng @6, AP1'],\n    [0, \"Pulse blaster | Long range\", 4, 3, 3, 4],\n    [0, \"Pulse carbine\", 4, 3, 4, 5],\n    [0, \"Pulse rifle\", 4, 3, 4, 5],\n    [1, \"Gun butt\", 3, 5, 2, 3])\n\n  f.unit(\"Pathfinder shas'la\", 3, 2, 1, 3, 5, 7, \"pathfinder, shas'la\",\n    [0, 'Pulse carbine', 4, 4, 4, 5],\n    [1, 'Gun butt', 3, 5, 2, 3])\n\n  f.unit(\"Pathfinder (heavy gunner)\", 3, 2, 1, 3, 5, 7, \"pathfinder, heavy gunner\",\n    [0, 'Ion rifle | Standard', 5, 4, 4, 5, '', 'P1'],\n    [0, 'Ion rifle | Overcharge', 5, 4, 5, 6, 'AP1, Hot'],\n    [0, 'Rail Rifle', 4, 4, 4, 4, 'AP1, Lethal 5+', 'MW2'],\n    [1, 'Gun butt', 3, 5, 2, 3])\n\n  f.unit(\"Pathfinder shas'ui\", 3, 2, 1, 3, 5, 8, \"leader, pathfinder, shas'ui\",\n    [0, 'Pulse carbine', 4, 3, 4, 5],\n    [1, 'Gun butt', 3, 5, 2, 3],\n    markerlight)\n\n  f.unit(\"Stealth battlesuit shas'ui\", 3, 2, 1, 3, 3, 10, \"fly, stealth battlesuit, shas'ui\",\n    [0, 'Burst cannon', 6, 4, 3, 4, 'Ceaseless, Fusillade'],\n    [0, 'Fusion blaster', 4, 4, 6, 3, 'Rng @6, AP2', 'MW4'],\n    [1, 'Fists', 4, 5, 2, 3],\n    camo_field)\n\n  f.unit(\"Stealth battlesuit shas'vre\", 3, 2, 1, 3, 3, 11, \"fly, leader, stealth battlesuit, shas'vre\",\n    [0, 'Burst cannon', 6, 3, 3, 4, 'Ceaseless, Fusillade'],\n    [0, 'Fusion blaster', 4, 4, 6, 3, 'Rng @6, AP2', 'MW4'],\n    [1, 'Fists', 4, 4, 2, 3],\n    camo_field)\n\n  const drone:I_Extra[] = [\n    [1, 'Ram', 3, 5, 2, 3],\n    [2, 'Artificial Intelligence', 'see page 137'],\n    [2, 'Saviour Protocols', 'see page 137']\n  ]\n\n  f.unit(\"MV1 gun drone\", 3, 2, 1, 3, 4, 7, 'drone, fly, mv1 gun drone',\n    [0, 'Twin pulse carbine', 4, 4, 4, 5, 'Relentless'],\n    ...drone)\n\n  f.unit2(\"MV4 shield drone\", '+',\n    ...drone,\n    [2, 'Shield Generator', 'This operative has a 4+ invulnerable save. Each time this operative would lose a wound that is not as a result of a mortal wound, roll one D6: on a 5+, that wound is not lost'])\n\n  f.unit2(\"MV36 guardian drone\", '+',\n    ...drone,\n    [2, 'Guardian Shield Generator', 'This operative has a 5+ invulnerable save.'],\n    [3, 'Guardian Field', 1, 'Until this operative is next activated, while a friendly HUNTER CADRE operative is within @3 of this operative, it has a 5+ invulnerable save.'])\n\n  f.unit2('MV31 pulse accelerator drone', '+', ...drone,\n    [2, 'Pulse Accelerator', \"While a friendly HUNTER CADRE operative is within @3 of this operative, pulse weapons that friendly operative is equipped with are accelerated. While a pulse weapon is accelerated, each time a shooting attack is made with it, in the Rolll Attack Dice step of that shooting attack, before rolling your attack dice, you can retain one as a successful normal hit without rolling it. A pulse weapon is a ranged weapaon that includes the word 'pulse' in its name, e.g. pulse carbine.\"])\n\n  f.unit2(\"MV33 grav-inhibitor drone\", '+', ...drone,\n    [2, 'Grav-inhibitor', \"Each time an enemy operative performs a Charge action, if it would move within @6 of this operative, only add @1 to the additional distance it can move, instead of @2. Each time an enemy operative performs a Dash action, if it would move within @6 of this operative, it can only move up to @2, instead of up to @3\"],\n    [3, 'Grav-wave', 1, \"Place a grav-wave token within @6 of and Visible to this operative. Until the start of this operative's next activation, while a friendly HUNTER CADRE operative is within @2 of the centre of that token, it can perform Fall Back actions for one less AP (to a minimum of 0AP).\"])\n\n  f.unit2('MV7 marker drone', '+', ...drone,\n    markerlight)\n\n  f.unit(\"MB3 recon drone\", 3, 2, 1, 4, 4, 12, '+',\n    [0, 'Burst cannon', 6, 4, 3, 4, 'Heavy, Ceaseless, Fusillade'],\n    ...drone,\n    [3, 'Analyse', 1, \"Select one enemy operative Visible to this operative, then select one other ready friendly HUNTER CADRE operative that is not within Engagement Range of enemy operatives. After this operative's activation ends, you can activate that other friendly operative, and during its next activation, each time it makes a shooting attack against that enemy operative, in the Roll Attack Dice step of that shooting attack, you can re-roll any or all of your attack dice. This operative cannot perform this action while within Engagement Range of enemy operatives\"])\n\n  f.unit(\"DS8 tactical support turret\", 0, 1, 1, 4, 4, 9, '+',\n    [0, 'Missile pod', 4, 4, 5, 7, 'Heavy'],\n    [0, 'Smart missile system', 6, 4, 3, 4, 'Heavy, Smart Targeting*'],\n    drone[1], drone[2],\n    [2, 'Smart Targeting*', 'Each time this operative makes a shooting attack with this weapon, you can use this special rule. If you do so, for that shooting attack:\\n - Enemy operatives with an Engage order that are not within Engagement Range of friendly operatives are valid targets and cannot be in Cover.\\n - In the Roll Attack Dice step of that shooting attack, attack dice results of 6 are successful normal hits. All other attack dice results are failed hits.'],\n    [2, 'Support Turret', 'This operative cannot have a Conceal order and can only perform Shoot and Overwatch actions. It cannot fight in combat (do not select a weapon or roll any attack dice for it) and cannot provide combat support.'])\n\n  return f.faction\n}\n\nfunction space_marine() {\n  return faction('Space Marines', 'space marine', 'chapter', 'imperium, adeptus astartes, <>', [\n    [\n      'Intercessor (warrior)', 3, 3, 1, 3, 3, 13, 'primaris, intercessor, warrior',\n      [0, 'Auto bolt rifle', 4, 3, 3, 4, 'Ceaseless'],\n      [0, 'Bolt rifle', 4, 3, 3, 4, _, 'P1'],\n      [0, 'Stalker bolt rifle', 4, 3, 3, 4, 'Heavy, AP1'],\n      [1, 'Fists', 4, 3, 3, 4]\n    ],[\n      'Intercessor sergeant', 3, 3, 1, 3, 3, 14, 'primaris, leader, intercessor, sergeant',\n      [0, 'Auto bolt rifle', 4, 2, 3, 4, 'Ceaseless'],\n      [0, 'Bolt pistol', 4, 2, 3, 4, 'Rng @6'],\n      [0, 'Bolt rifle', 4, 2, 3, 4, '', 'P1'],\n      [0, 'Hand flamer', 4, 2, 2, 2, 'Rng @6, Torrent @1'],\n      [0, 'Plasma Pistol | Standard', 4, 2, 5, 6, 'Rng @6, AP1'],\n      [0, 'Plasma Pistol | Supercharge', 4, 2, 5, 6, 'Rng @6, AP2, Hot'],\n      [0, 'Stalker bolt rifle', 4, 2, 3, 4, 'Heavy, A:1'],\n      [1, 'Chainsword', 4, 3, 4, 5],\n      [1, 'Fists', 4, 3, 3, 4],\n      [1, 'Power fist', 4, 4, 5, 7, 'Brutal'],\n      [1, 'Power weapon', 4, 3, 4, 6, 'Lethal 5+'],\n      [1, 'Thunder hammer', 4, 4, 5, 6, '', 'Stun'],\n    ]\n  ]);\n}\n\nfunction orks() {\n  let kombi:I_Ability = [2, 'Kombi*',\n    'An operative equipped with this weapon is also equipped with a shoota.']\n  let runt:I_Ability = [2, 'Runt',\n    'This operative cannot be equipped with equipment. This operative cannot benefit from your Strategic and Tactical Ploys.'];\n\n  return faction('Orks', 'greenskin', 'clan', 'ork, <>', [\n    [\n      'Boy (fighter)', 3, 2, 1, 3, 5, 10, 'boy, fighter',\n      [0, 'Shoota', 4, 5, 3, 4],\n      [0, 'Slugga', 4, 5, 3, 4, 'Rng @6'],\n      [1, 'Choppa', 4, 3, 4, 5],\n      [1, 'Fists', 3, 3, 3, 4],\n    ],[\n      'Boss Nob', 3, 2, 1, 3, 4, 13, 'leader, boy, boss nob',\n      [0, 'Kombi-rokkit', 5, 5, 4, 5, 'Kombi*, Limited, AP1', 'Splash 1'],\n      [0, 'Kombi-skorcha', 6, 2, 2, 2, 'Kombi*, Limtied, Rng @6, Torrent @1'],\n      [0, 'Shoota', 4, 5, 3, 4, _, _, kombi],\n      [0, 'Slugga', 4, 5, 3, 4, 'Rng @6'],\n      [1, 'Big choppa', 4, 2, 5, 6],\n      [1, 'Choppa', 4, 2, 4, 5],\n      [1, 'Fists', 3, 2, 3, 4],\n      [1, 'Killsaw', 4, 3, 5, 7, _, 'Rending'],\n      [1, 'Power klaw', 4, 3, 5, 7, 'Brutal'],\n      kombi,\n    ],[\n      'Boy (gunner)', 3, 2, 1, 3, 5, 10, 'boy, gunner',\n      [0, 'Big shoota', 6, 5, 2, 3, 'Fusillade'],\n      [0, 'Rokkit launcha', 5, 5, 4, 5, 'AP1', 'Splash 1'],\n      [1, 'Fists', 3, 3, 3, 4],\n    ],[\n      'Gretchin', 3, 2, 2, 3, 6, 5, 'boy, gretchin',\n      [0, 'Gretchin blasta', 3, 4, 2, 3, 'Rng @6'],\n      [1, 'Gretchin knife', 3, 5, 1, 2],\n      runt,\n    ],[\n      'Clan kommando (fighter)', 3, 2, 1, 3, 5, 10, 'clan kommando, fighter',\n      [0, 'Slugga', 4, 5, 3, 4, 'Rng @6'],\n      [1, 'Choppa', 4, 3, 4, 5],\n    ],[\n      'Clan kommando nob', 3, 2, 1, 3, 4, 13, 'leader, clan kommando, kommando nob',\n      [0, 'Slugga', 4, 4, 3, 4, 'Rng @6'],\n      [1, 'Choppa', 4, 2, 4, 5],\n      [1, 'Power klaw', 4, 3, 5, 7, 'Brutal'],\n    ],[\n      'Burna boy', 3, 2, 1, 3, 5, 10, 'speshulist, burna boy',\n      [0, 'Burna', 5, 2, 2, 2, 'Rng @6, Torrent @1'],\n      [1, 'Fists', 3, 3, 3, 4],\n    ],[\n      'Loota', 3, 2, 1, 3, 5, 10, 'speshulist, loota',\n      [0, 'Deffgun', 5, 5, 4, 6],\n      [1, 'Fists', 3, 3, 3, 4],\n    ],[\n      'Spanner', 3, 2, 1, 3, 5, 11, 'leader, speshulist, spanner',\n      [0, 'Big shoota', 6, 4, 2, 3, 'Fusillade'],\n      [0, 'Kustom mega-blasta', 4, 4, 5, 6, 'AP2, Hot'],\n      [0, 'Rokkit launcha', 5, 4, 4, 5, 'AP1', 'Splash 1'],\n      [1, 'Fists', 3, 3, 3, 4],\n    ]\n  ]);\n}\n\nfunction death_guard() {\n  const kw_base = `chaos, bubonic astartes, <>`\n  const kw_marine = `${kw_base}, plague marine`\n\n  let resilient:I_Ability = [2, 'Disgustingly Resilient', 'Each time this operative would lose a wound, roll one 06: on a 5+, that wound is not lost. Other than the effects of Battle Scars, this operative cannot be injured.']\n\n  return faction('Death Guard', 'death guard', 'company', '', [\n    [\n      'Plague marine (warrior)', 2, 3, 1, 3, 3, 12, `${kw_marine}, warrior`,\n      [0, 'Boltgun', 4, 3, 3, 4],\n      [1, 'Plague knife', 3, 3, 3, 5],\n      resilient\n    ],[\n      'Plague marine (gunner)', 2, 3, 1, 3, 3, 12, `${kw_marine}, gunner`,\n      [0, 'Meltagun', 4, 3, 6, 3, 'Rng @6, AP2', 'MW4'],\n      [0, 'Plague belcher', 5, 2, 2, 3, 'Rng @6, Torrent @1'],\n      [0, 'Plasma gun | Standard', 4, 3, 5, 6, 'AP1'],\n      [0, 'Plasma gun | Supercharge', 4, 3, 5, 6, 'AP2, Hot'],\n      [1, 'Plague knife', 3, 3, 3, 5],\n      resilient\n    ],[\n      'Plague marine (heavy gunner)', 2, 3, 1, 3, 3, 12, `${kw_marine}, heavy gunner`,\n      [0, 'Blight launcher', 4, 3, 4, 6, 'AP1'],\n      [0, 'Plague spewer', 6, 2, 2, 3, 'Rng @6, Torrent @1'],\n      [1, 'Plague knife', 3, 3, 3, 5],\n      resilient\n    ],[\n      'Plague marine (fighter)', 2, 3, 1, 3, 3, 12, `${kw_marine}, fighter`,\n      [0, 'Bolt pistol', 4, 3, 3, 4, 'Rng @6'],\n      [1, 'Bubotic axe', 5, 3, 4, 6, _, 'Rending'],\n      [1, 'Flail of corruption', 5, 3, 4, 5, _, 'Reap 2'],\n      [1, 'Great plague cleaver', 5, 4, 5, 7, _, 'Rending'],\n      [1, 'Mace of contagion', 5, 3, 4, 5, _, 'Stun'],\n      [1, 'Plague knives', 5, 3, 3, 5, 'Relentless'],\n      resilient\n    ],[\n      'Plague marine (icon bearer)', 2, 3, 1, 3, 3, 12, `${kw_marine}, icon bearer`,\n      [0, 'Boltgun', 4, 3, 3, 4],\n      [1, 'Plague knife', 3, 3, 3, 5],\n      resilient,\n      icon_bearer,\n      [3, 'Icon of Decay', 1, \"Until the end of the Turning Point, while this operative is Visible to and within @3 of a friendly BUBONIC ASTARTES operative, that friendly operative is invigorated by decay. While an operative is invigorated by decay, when rolling for its Disgustingly Resilient ability, you can re-roll results of 1 and 2.\"]\n    ],[\n      'Plague marine champion', 3, 3, 1, 3, 3, 13, `${kw_base}, leader, plague marine, champion`,\n      [0, 'Boltgun', 4, 2, 3, 4],\n      [0, 'Bolt pistol', 4, 2, 3, 4, 'Rng @6'],\n      [0, 'Plasma pistol | Standard', 4, 2, 5, 6, 'Rng @6, AP1'],\n      [0, 'Plasma pistol | Supercharge', 4, 2, 5, 6, 'Rng @6, AP2, Hot'],\n      [1, 'Plague knife', 5, 2, 3, 5],\n      [1, 'Plague sword', 5, 2, 4, 6],\n      [1, 'Power fist', 5, 3, 5, 7, 'Brutal']\n    ],[\n      'Poxwalker', 2, 2, 2, 3, 6, 7, 'chaos, poxwalker',\n      [1, 'Improvised weapon', 4, 4, 2, 3],\n      resilient,\n      [2, 'Mindless', \"Each time this operative would perform a mission action or the Pick Up action, you must subtract one additional AP to do so. This operative cannot be equipped with equipment. In narrative play, it cannot gain (or lose) experience and automatically passes Casualty tests.\"]\n    ]\n  ]);\n}\n\nfunction ecclesiarchy() {\n  const kw_base = 'imperium, adeptus ministorum, adepta sororitas, <>'\n  const kw_bsister = `${kw_base}, battle sister`\n  let combi:I_Ability = [2, 'Combi*',\n    'An operative equipped with this weapon is also equipped with a boltgun.']\n\n  return faction('Ecclesiarchy', 'ecclesiarchy', 'order', '', [\n    [\n      'Battle sister (warrior)', 3, 2, 1, 3, 3, 8, `${kw_bsister}, warrior`,\n      [0, 'Boltgun', 4, 3, 3, 4],\n      [1, 'Gun butt', 3, 4, 2, 3],\n    ],[\n      'Battle sister (icon bearer)', 3, 2, 1, 3, 3, 8, `${kw_bsister}, icon bearer`,\n      [0, 'Boltgun', 4, 3, 3, 4],\n      [1, 'Gun butt', 3, 4, 2, 3],\n      icon_bearer,\n      [3, 'Icon of Purity', 1, \"Until the end of the Turning Point, while this operative is Visible to and within @3 of a friendly ADEPTA SORORITAS operative, that friendly operative is inspired by purity. While an operative is inspired by purity, each time it fights in combat or makes a shooting attack, in the Roll Attack Dice step of that combat or shooting attack, you can retain one of your attack dice results of 5+ that is a successful hit as a critical hit.\"]\n    ],[\n      'Battle sister (gunner)', 3, 2, 1, 3, 3, 8, `${kw_bsister}, gunner`,\n      [0, 'Meltagun', 4, 3, 6, 3, 'Rng @6, AP2', 'MW4'],\n      [0, 'Ministorum flamer', 5, 2, 2, 3, 'Rng @6, Torrent @2'],\n      [0, 'Storm bolter', 4, 3, 3, 4, 'Relentless'],\n      [1, 'Gun butt', 3, 4, 2, 3]\n    ],[\n      'Battle sister (heavy gunner)', 3, 2, 1, 3, 3, 8, `${kw_bsister}, heavy gunner`,\n      [0, 'Heavy bolter', 5, 3, 4, 5, 'Heavy, Fusillade', 'P1'],\n      [0, 'Ministorum heavy flamer', 6, 2, 2, 3, 'Heavy, Rng @6, Torrent @2'],\n      [1, 'Gun butt', 3, 4, 2, 3],\n    ],[\n      'Battle sister superior', 3, 2, 1, 3, 3, 9, `${kw_base}, leader, battle sister, superior`,\n      [0, 'Bolt pistol', 4, 2, 3, 4, 'Rng @6'],\n      [0, 'Boltgun', 4, 2, 3, 4, _, _, combi],\n      [0, 'Combi-melta', 4, 2, 6, 3, 'Combi*, Rng @6, AP2, Limited', 'MW4'],\n      [0, 'Combi-plasma | Standard', 4, 2, 5, 6, 'Combi*, AP1, Limited'],\n      [0, 'Combi-plasma | Overcharge', 4, 2, 5, 6, 'Combi*, AP2, Hot, Limited'],\n      [0, 'Condemnor boltgun', 4, 2, 3, 3, 'Combi*, Silent, Limited', 'MW1, P1'],\n      [0, 'Inferno pistol', 4, 2, 5, 3, 'Rng @3, AP2', 'MW3'],\n      [0, 'Ministorum combi-flamer', 5, 2, 2, 3, 'Combi*, Rng @6, Torrent @2, Limited'],\n      [0, 'Ministorum hand flamer', 4, 2, 2, 3, 'Rng @6, Torrent @1'],\n      [0, 'Plasma pistol | Standard', 4, 2, 5, 6, 'Rng @6, AP1'],\n      [0, 'Plasma pistol | Supercharge', 4, 2, 5, 6, 'Rng @6, AP2, Hot'],\n      [1, 'Chainsword', 4, 2, 3, 4],\n      [1, 'Gun butt', 3, 3, 2, 3],\n      [1, 'Power maul', 4, 2, 4, 5, _, 'Stun'],\n      [1, 'Power weapon', 4, 2, 4, 6, 'Lethal 5+'],\n      combi\n    ],[\n      'Sister repentia', 3, 2, 1, 3, 6, 7, `${kw_base}, sister, repentia`,\n      [1, 'Penitent eviscerator', 4, 4, 5, 6, 'Brutal', 'Reap 2'],\n      [2, 'Solace in Anguish', 'Each time this operative would lose a wound, roll one D6: on a 5+, that wound is not lost.']\n    ],[\n      'Repentia superior', 3, 2, 1, 3, 3, 9, `${kw_base}, leader, repentia, superior`,\n      [0, 'Neural whips', 5, 3, 2, 3, 'Lethal 5+, Rng @3', 'Stun'],\n      [1, 'Neural whips', 5, 3, 2, 3, 'Lethal 5+', 'Stun'],\n      [3, 'Whip Into Fury', 1, \"Select on friendly SISTER REPENTIA operation within @3 of and Visible to this operative. Add 1 to that friendly operative's Movement characteristic\"]\n    ],[\n      'Arco-flagellant', 3, 2, 1, 3, 6, 10, `imperium, adeptus ministorum, arco-flagellant`,\n      [1, 'Arco-flails', 5, 3, 3, 4, 'Ceaseless', 'Reap 1'],\n      [2, 'Berserk Killing Machine', 'Each time this operative would lose a wound, roll one D6: on a 5+, that wound is not lost. This operation cannot perform mission actions or Pick Up actions. Unless otherwise specified, this operative cannot be equipped with equipment.']\n    ]\n  ])\n}\n\n\n\nconst factions:Dict<Faction> = {\n  tau: tau(),\n  space_marine: space_marine(),\n  ork: orks(),\n  death_guard: death_guard(),\n  ecclesiarchy: ecclesiarchy(),\n}\n\nfunction random_faction() {\n  return Object.keys(factions).sort(() => Math.random()-.5)[0];\n}\n\nexport const Compendium = {factions, random_faction}\n\n\n","import {Roster} from './types'\nimport {Compendium} from './compendium'\n\n\ntype Save = {id:number, name:string, faction:string}\ntype Saves = Save[]\n\n\nfunction storage_get<T>(key:string) : T|null {\n  key = `kt_${key}`\n  try {\n    let json = localStorage.getItem(key)\n    if (json) {\n      return JSON.parse(json) as T\n    }\n  } catch (e) {}\n  return null;\n}\n\nfunction storage_get_dflt<T>(key:string, dflt:T) : T {\n  let val = storage_get<T>(key);\n  if (val) {\n    return val;\n  } else {\n    storage_set(key,dflt)\n    return dflt;\n  }\n}\n\nfunction storage_set<T>(key:string, obj:T) {\n  key = `kt_${key}`\n  localStorage.setItem(key, JSON.stringify(obj));\n}\n\n\nfunction scrub_roster(roster:Roster|null) {\n  if (roster) {\n    const units = Compendium.factions[roster.faction].units\n\n    for (let unit of roster.units) {\n      const cunit = units.find(u => (u.name === unit.unit.name));\n      if (cunit)  unit.unit = cunit;\n    }\n  }\n\n  return roster\n}\n\n\nexport function autosave(roster:Roster) {\n  roster.updated = new Date()\n  storage_set('autosave', roster);\n}\n\nexport function load_autosave() : Roster|null {\n  return scrub_roster(storage_get<Roster>('autosave'))\n}\n\nexport function save(roster:Roster) {\n  var saves = storage_get_dflt('saves', [] as Saves)\n  var save = saves.find(s => (s.name === roster.name && s.faction === roster.faction));\n\n  // create a new save\n  if (!save) {\n    var id = Math.max(0, ...saves.map(s => s.id)) + 1;\n    save = {id:id, name:roster.name, faction:roster.faction};\n    saves.push(save);\n    storage_set('saves',saves);\n  }\n\n  // write the save\n  storage_set(`save_${save?.id}`, roster);\n}\n\nexport function get_saves() : Saves {\n  return storage_get_dflt('saves', [] as Saves)\n}\n\nexport function load(id:number) : Roster|null {\n  return scrub_roster(storage_get<Roster>(`save_${id}`));\n}\n\n\n","import {Unit,UnitConf,Weapon,Roster} from './types'\nimport {Compendium} from './compendium'\nimport {useState,useRef} from 'react'\nimport * as ktlib from './ktlib'\n\n\nfunction useState2<T>(init:T, onChange: (_:T) => void) : [T,(_:T) => void] {\n  const [val,setVal] = useState(init);\n  const setVal2 = (nval:T) => {\n    setVal(nval);\n    onChange(nval);\n  }\n\n  return [val,setVal2]\n}\n\n\nexport function Root() {\n  const [mode,setMode] = useState(0)\n  const [roster,setRoster] = useState2(ktlib.load_autosave(), () => setMode(0));\n\n  const onCancel = () => setMode(0);\n\n  let roster_view = <></>\n  if (roster) {\n    roster_view = (<RosterView roster={roster} onNew={() => setMode(1)} onLoad={() => setMode(2)}/>)\n  }\n  let create_view = render_if(!roster || mode === 1,\n    (<CreateRoster onCreate={setRoster} onCancel={onCancel} />))\n  let loader_view = render_if(mode === 2,\n    (<LoadRoster onLoad={setRoster} onCancel={onCancel} />))\n\n  return <>{roster_view}{create_view}{loader_view}</>\n}\n\n\nexport function CreateRoster(props:{\n  onCreate(roster:Roster): void,\n  onCancel?: () => void\n}) {\n  const [name,setName] = useState('')\n  const [faction,setFaction] = useState(() => Compendium.random_faction())\n  const [clan,setClan] = useState('')\n\n  const {clan_label} = Compendium.factions[faction]\n\n  const create = () => {\n    props.onCreate({\n      name: name.trim(),\n      faction: faction.trim(),\n      clan: clan.trim(),\n      units: [],\n      created: new Date(),\n      updated: new Date(),\n    })\n  }\n\n  return <Modal><div className=\"kt-create\">\n    <div>Faction:</div><div><select value={faction} onChange={e => setFaction(e.target.value)}>\n      {Object.entries(Compendium.factions).map(([id,f]) => (\n            <option key={id} value={id}>{f.name}</option>\n      ))}\n    </select></div>\n    <div>Name:</div><div><input value={name} onChange={e => setName(e.target.value)} /></div>\n    <div style={{textTransform:'capitalize'}}>{clan_label}:</div>\n    <div><input value={clan} onChange={e => setClan(e.target.value)} /></div>\n    <div className=\"buttons\">\n      {render_if(!!props.onCancel, (<button onClick={props.onCancel}>Cancel</button>))}\n      <button onClick={create} disabled={!name.trim() || !clan.trim()}>Create</button>\n    </div>\n  </div></Modal>\n}\n\n\nexport function RosterView(props:{\n  roster:Roster,\n  onNew() : void,\n  onLoad() : void,\n}) {\n  const [edit,setEdit] = useState<UnitConf|null>(null)\n  const [add,setAdd] = useState(false)\n\n  const roster = props.roster;\n  const units = roster.units;\n  ktlib.autosave(roster);\n  const faction = Compendium.factions[roster.faction]\n\n  // setup the editor\n  let editor = render_iff(!!edit || add, () => {\n\n    const onSave = (nconf:UnitConf) => {\n      setEdit(null)\n      setAdd(false)\n\n      const idx = units.findIndex(u => (u === edit));\n      if (idx === -1) {\n        units.push(nconf)\n      } else {\n        units[idx] = nconf;\n      }\n    }\n\n    const onCancel = (doDelete:boolean) => {\n      setEdit(null)\n      setAdd(false)\n\n      if (doDelete) {\n        const idx = units.findIndex(u => (u === edit));\n        if (idx !== -1) {\n          units.splice(idx,1);\n        }\n      }\n    }\n\n    if (edit) {\n      return (<UnitEditor onSave={onSave} onCancel={onCancel} faction={roster.faction} conf={edit} />)\n    } else {\n      return (<UnitEditor onSave={onSave} onCancel={onCancel} faction={roster.faction} />)\n    }\n  })\n\n  // render\n  return <div>\n    {editor}\n\n    <div className=\"kt-controls\">\n      <button onClick={props.onNew}>New</button>\n      <button onClick={() => ktlib.save(roster)}>Save</button>\n      <button onClick={props.onLoad}>Load</button>\n      <button onClick={() => setAdd(true)}>Add Operative</button>\n    </div>\n\n    <div className=\"kt-roster\">\n      <div className=\"header\">\n        <b>Name</b> {roster.name}<br/>\n        <b>Faction</b> {faction.name}<br/>\n        <b>{faction.clan_label}</b> {roster.clan}\n      </div>\n      <div className=\"body\">\n        <div>{units.map((u,n) => (<DataCard clan={roster.clan} key={n} conf={u} onEdit={() => setEdit(u)} />))}</div>\n        <DamageTracker units={units} />\n      </div>\n    </div>\n  </div>\n}\n\n\nfunction DataCard(props:{\n  conf:UnitConf,\n  clan:string,\n  onEdit(): void,\n}) {\n  const conf = props.conf;\n  const unit = conf.unit;\n  var keywords = unit.keywords.map(kw => (kw === '<>') ? `, ${props.clan}` : `, ${kw}`)\n  var primary = unit.weapons.filter(w => (w.uname === conf.ranged || w.uname === conf.melee));\n  const has_sr = (rule:string) => !!primary.find(wx => wx.sr && (wx.sr.indexOf(rule) !== -1));\n\n  // check if secondary weapons should be enabled\n  var weapons = unit.weapons.filter(w => {\n    return ((w.secondary !== null) && has_sr(w.secondary))\n        || (w.uname === conf.ranged || w.uname === conf.melee);\n  });\n\n  // check if any of the abilities are based upon the weapons\n  var abilities = unit.abilities.filter(a => {\n    return !a.on_weapon || has_sr(a.name);\n  });\n\n\n  const move = (unit.move > 0)\n    ? <>{unit.move}<span className=\"ktg-m2\" /></>\n    : <>-</>;\n\n  // replace special rules\n  return (\n    <div className=\"kt-data-card\">\n      <button className=\"edit\" onClick={props.onEdit}>EDIT</button>\n      <div className=\"name\">{conf.count ? `( ${conf.count} ) ` : ''}&nbsp;{unit.name}</div>\n      <div className=\"keywords\"><b>{unit.faction}</b>{keywords}</div>\n      <div className=\"info\">\n        <div className=\"stats topline\"><b>M</b> {move} <b>APL</b> {unit.apl} <b>GA</b> {unit.ga} <b>DF</b> {unit.df} <b>SV</b> {unit.sv}+ <b>W</b> {unit.hp}</div>\n\n        {weapons.map((w,n) => (<div key={n} className=\"weapon\">\n          <div className=\"wname\"><div className={w.type} />{w.name} &nbsp;&nbsp;</div>\n          <div className=\"stats \">\n            <b>A</b> {w.atk} <b>{w.type === 'r' ? 'BS' : 'WS'}</b> {w.ws}+ <b>D</b> {w.dam}/{w.cdam}\n            <br/>\n            {!w.sr ? null : (<><b>SR</b> </>)}\n            {scrub_text(w.sr||'')}\n            {!w.cr ? null : (<> <b>!</b> {w.cr} </>)}\n          </div>\n        </div>))}\n\n        {unit.actions.map((a,n) => (<div key={n} className=\"extra\">\n          <div className=\"i-action\" />\n          <span>{a.name} - {a.cost} AP</span><span className=\"descr\"> - {scrub_text(a.descr)}</span>\n        </div>))}\n\n        {abilities.map((a,n) => (<div key={n} className=\"extra\">\n          <div className=\"i-ability\" />\n          <span>{a.name}</span><span className=\"descr\"> - {scrub_text(a.descr)}</span>\n        </div>))}\n      </div>\n    </div>\n  )\n}\n\nfunction scrub_text(txt:string) {\n  const parts = [...txt.matchAll(/([^@\\n]+|@.|\\n)/g)]\n  return parts.map(([x],i) => {\n    if (x[0] === '@') {\n      let clazz= `ktg-m${x[1]}`\n      return (<span key={i} className={clazz} />)\n    } else if (x === '\\n') {\n      return (<br key={i}/>)\n    } else {\n      return (<span key={i}>{x}</span>)\n    }\n  })\n}\n\nfunction DamageTracker({units}:{units:UnitConf[]}) {\n  var n = 0;\n  var each = units.map(({unit,count}) => (<div key={n++} className=\"unit\">\n    <div className=\"name\">{unit.name}</div>\n    {range_array(count).map(i => (<div className=\"pips\" key={n++}>\n      {range_array(Math.ceil(unit.hp/2)).map(() => 'O').join('')}&nbsp;&nbsp;\n      {range_array(Math.floor(unit.hp/2)).map(() => 'O').join('')}\n    </div>))}\n  </div>));\n\n  return <div className=\"kt-dam-track\">{each}</div>\n}\n\n\nfunction UnitEditor(props:{\n  conf?: UnitConf,\n  onSave(_:UnitConf): void,\n  onCancel(_:boolean): void,\n  faction: string,\n}) {\n  const conf = props.conf;\n  const is_edit = !!conf;\n  const countRef = useRef(conf ? `${conf.count}`: '0')\n  const rangedRef = useRef(conf ? conf.ranged : '')\n  const meleeRef = useRef(conf ? conf.melee : '')\n\n  const [unitid,setUnitId] = useState<number>(0)\n  const [unit,setUnit] = useState(conf?.unit)\n\n  const onSave = () => {\n    props.onSave({\n      count: ~~countRef.current,\n      ranged: rangedRef.current,\n      melee: meleeRef.current,\n      unit: unit as Unit\n    })\n  }\n\n  // setup the add unit portion\n  var el1:any\n  if (!conf) {\n    let {units} = Compendium.factions[props.faction];\n\n    const setId = (id:number) => {\n      setUnitId(id)\n      setUnit(units.find(u => u.id === id))\n    }\n\n    // default the unit selection\n    if (units.length && !units.find(u => (u.id === unitid))) {\n      setId(units[0].id)\n    }\n\n    el1 = (<>\n      {!units.length ? null : (<><div>Unit:</div><div>\n        <select value={unitid} onChange={e => setId(~~e.target.value)}>\n          {units.map(u => (<option key={u.id} value={u.id}>{u.name}</option>))}\n        </select>\n      </div></>)}\n    </>)\n  }\n\n  // setup the configuration part\n  var el2:any;\n  if (unit) {\n    const weapons = unit.weapons.filter(w => !w.secondary);\n    const r_weapons = get_unique_weapons('r',weapons);\n    const m_weapons = get_unique_weapons('m',weapons);\n\n    el2 = (<>\n      <div>Count:</div><div>\n        <Select value={countRef} values={range_array(10).map(n => `${n+1}`)} />\n      </div>\n      <div>Ranged:</div><div>\n        <Select value={rangedRef} values={r_weapons} />\n      </div>\n      <div>Melee:</div><div>\n        <Select value={meleeRef} values={m_weapons} />\n      </div>\n    </>)\n  }\n\n  return (<Modal><div className=\"kt-unit-editor\">\n    {el1}{el2}\n    <div className=\"buttons\">\n      <button onClick={() => props.onCancel(false)}>Cancel</button>\n      {render_if(is_edit, (<button onClick={() => props.onCancel(true)}>Delete</button>))}\n      <button onClick={() => onSave()}>{is_edit ? 'Save' : 'Add'}</button>\n    </div>\n  </div></Modal>);\n}\n\n\nfunction LoadRoster(props:{\n  onLoad(roster:Roster) : void,\n  onCancel() : void\n}) {\n  let saves = ktlib.get_saves()\n\n  const onLoad = (id:number) => {\n    let roster = ktlib.load(id)\n    if (roster)  props.onLoad(roster)\n  }\n\n  return <Modal><div className=\"kt-loader\">\n    {saves.map(s => (<button onClick={() => onLoad(s.id)}>\n        {s.name} | {Compendium.factions[s.faction].name}\n    </button>))}\n    <button onClick={props.onCancel}>Cancel</button>\n  </div></Modal>\n}\n\n\nfunction Modal({children}:{children:any}) {\n  return (<div className=\"kt-modal\"><div className=\"inner\">{children}</div></div>)\n}\n\n\nfunction Select({values,value}:{\n  values: string[],\n  value: React.MutableRefObject<string>,\n\n\n}) {\n  const [state,setState] = useState(value.current)\n\n  if (!values.find(x => (x===state))) {\n    set(values[0]);\n  }\n\n  function set(nval:string) {\n    value.current = nval;\n    setState(nval)\n  }\n\n  return (<select value={state} onChange={e => set(e.target.value)}>\n    {values.map(n => (<option key={n}>{n}</option>))}\n  </select>)\n}\n\n\n\n// ---- helper functions\nfunction range_array(n:number) {\n  return Array.from(Array(n).keys());\n}\n\nfunction get_unique_weapons(type:'r'|'m', weapons:Weapon[]) {\n  let names = weapons.filter(w => w.type === type).map(w => w.uname)\n  return (names.length === 0) ? ['-'] : [...new Set(names)]\n}\n\ntype RenderFn = () => JSX.Element;\n\nfunction render_if(cond:boolean, el:JSX.Element) : JSX.Element|null {\n  return cond ? el : null;\n}\n\nfunction render_iff(cond:boolean, fn:RenderFn) : JSX.Element|null {\n  return cond ? fn() : null;\n}\n","import './bob.scss';\nimport {Root} from './roster';\n\nfunction App() {\n  return (\n    <Root />\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n// reset the local storage state\nif (window.location.search.indexOf('reset') !== -1) {\n  localStorage.clear()\n  window.location.replace('/')\n\n// normal\n} else {\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n\n  // If you want to start measuring performance in your app, pass a function\n  // to log results (for example: reportWebVitals(console.log))\n  // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n  reportWebVitals();\n}\n"],"sourceRoot":""}